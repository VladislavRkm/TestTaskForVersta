# TestTaskForVersta
## Техническое задание:
*Реализовать простое Web приложение для приемки заказа на доставку со следующим функционалом:*

*1. Форма создания нового заказа (все поля обязательны для заполнения):*
*Город отправителя
Адрес отправителя
Город получателя
Адрес получателя
Вес груза
Дата забора груза*

*2. Форма отображения списка заказов: все созданные заказы должны отображаться в отдельной форме. Помимо полей, введенных пользователем при создании заказа, должен отображаться автоматически сгенерированный номер заказа.*

*3. Форма просмотра созданного заказа в режиме чтения. Должна открываться при клике на заказ в списке заказов.*

___
## Стек технологий:

* ASP.NET 8 на backend
* React.js, Vite, Tailwind CSS, Chakra UI
* Entity Framework
* PostgreSQL
* Docker
___
## Backend:
 Я решил написать данное приложение с использованием луковой(чистой) архитектуры. Как известно, всё начинается с доменных сущностей:
 
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/4af54062-a543-42bd-bcbb-fc0799627fb9)
 (Все слои и взаимодействия можно увидеть в структкуре проекта.)
 
 Не буду тянуть. Когда все сущности, модели, контекст, репозитории, интерфейсы, сервисы и контроллеры были написаны, я подключил базу данных PostgreSQL и поднял её в Docker-контейнере.
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/0785811f-eac8-4ee0-a266-43d88a19e48d)
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/608d291e-1f46-4b99-b3b5-e36904ec9453)
 ___
 Можно запускать проект. При запуске у нас открывается страница Swagger'a со следующими http-запросами:
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/b6f43d69-5cd5-4f92-9833-a6e7d51b3f41)
 ___
 Проверим их работоспособность, и первым делом создадим заказ на перевозку груза:
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/b6295f9b-87f5-4351-8108-d92a115f9e1b)
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/13440220-455c-4132-ae4b-100dd13e67c1)
 Видим код "200", радуемся жизни и отправляем GET-запрос и получаем наши заказы, дабы убедиться, что всё не зря:
 ![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/79abdfb1-084a-4aba-ae17-1e00c607851f)
 Перед нами два заказа, один из которых не несёт в себе никакой содержательной информации. Удалим его и проверим работоспособность DELETE-запроса. Копируем id заказа, который хотим удалить и вставляем в поле для заполнения.
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/62a83acf-4280-4615-9302-679a4fb4e8b8)
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/81e87d2e-8e1c-4648-aeee-76e147cfe6de)
___
Теперь представим, что экспедитору попался ненадёжный заказчик и ему нужно подкорректировать детали заказа. Корректируем данные, отправляем UPDATE-запрос, а затем GET-запрос, чтобы убедиться, что внесённые изменения сохранены.
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/b179ba10-056d-48a0-a1cd-4f87aea475da)
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/e9a901ac-846b-403a-a423-bca654235a71)
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/83d16269-7291-4858-955a-db6e0e3fc1f9)
___
Наконец, убедимся, что в базе данных всё также сохраняется:
![image](https://github.com/VladislavRkm/TestTaskForVersta/assets/113041279/434803a5-0f7e-4220-b1a1-e545dc57aa44)
___

## Frontend:
В предыдущей версии проекта я использовал библиотеку Razor Pages. Решил отказаться от неё, так как Razor и Blazor больше используются в MVC проектах. Во-первых, мой проект написан на луковой архитектуре, а используя Razor, её смысл теряется. Во-вторых, MVC имеет большие проблемы с масштабированием, а я хотел бы, чтобы реализация была приближенной к коммерческому коду.
Для запуска фронтенд-части откройте папку с проектом в VS Code и введите следующие команды:
```
cd .\cg_delivery\
```
и
```
npm run dev
```
Главная страница выглядит следующим образом. Мы можем увидеть кнопку для формирования нового заказа и форму для просмотра уже существующих заказов (пока что она пуста):

![image](https://github.com/user-attachments/assets/98715e0a-2902-4226-a480-5e4d4d2d13a4)

Убедимся, что наша база данных также пуста и перейдём к ручному тестированию функционала страницы.

![image](https://github.com/user-attachments/assets/b3b82ac8-ef57-4acc-8d7a-b627ffc88ce0)

___
Создадим новый заказ, нажимаем кнопку "Отправить". Сейчас он появится в форме для отображения заказов.
![image](https://github.com/user-attachments/assets/00df9c48-dabc-4568-98f4-f343b6551b2d)

![image](https://github.com/user-attachments/assets/a1645026-7284-457e-b7e7-ffa532b2d121)


Проверим его наличие в БД:
![image](https://github.com/user-attachments/assets/8a75f32a-6632-4553-bdcf-84f50dfa0445)


Видим, что заказ отобразился и все данные совпадают с тем, что отражено на странице.
___
В предыдущей версии были реализованы кнопки для редактирования и удаления заказа. В данной версии их нет. С точки зрения бизнес-логики, у клиента не должно быть возможности редактирования и удаления заказа после его создания. В любом маркетплейсе или интернет-магазине подобные вещи делаются через поддержку.
Поэтому получим наш заказ на бэкенде и отредактируем его.

![image](https://github.com/user-attachments/assets/468f29fd-3427-4cd6-a343-b81650fc369a)

Убедимся, что наш заказ получен, скопируем id и внесём изменения.
![image](https://github.com/user-attachments/assets/63fd863f-dd10-4b0b-a6ef-e0fbb5b86b53)

Перейдём на наш сайт и увидим, что изменения отобразились
![image](https://github.com/user-attachments/assets/1121e85c-f27c-49c2-a63e-5e1ba5bfd30b)



___
Подведём итоги.
Технические требования к реализации:

- [x] Форма заказа с обязательными для заполнения полями
- [x] Форма для отображения сформированных заказов с автоматически сгенерированным номером для каждого заказа
- [x] Форма для просмотра заказа в режиме чтения

Технологии:

- [x] ASP.NET 8 на backend
- [x] React.JS (предпочтительно) на front
- [x] Razor Pages на front
- [x] Entity Framework
- [x] Docker (дополнительно)
- [x] PostgreSQL














 




 

 
